{"code":"!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";var a;n.r(t);var r=(a=void 0!==a?new Web3(a.currentProvider):new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"))).eth.contract([{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"txTime\",type:\"uint256[]\"},{indexed:!1,name:\"txValue\",type:\"uint32[]\"},{indexed:!1,name:\"blockNumber\",type:\"uint256[]\"},{indexed:!1,name:\"blockHash\",type:\"bytes32[]\"},{indexed:!1,name:\"txGasPrice\",type:\"uint256[]\"}],name:\"ProTransactionEvent\",type:\"event\"},{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"eTime\",type:\"uint256\"},{indexed:!1,name:\"enerAmount\",type:\"uint32\"}],name:\"EnerProductionEvent\",type:\"event\"},{anonymous:!1,inputs:[{indexed:!1,name:\"pvAddr\",type:\"address\"},{indexed:!1,name:\"owner\",type:\"string\"},{indexed:!1,name:\"deviceType\",type:\"string\"},{indexed:!1,name:\"peakPowerPos\",type:\"uint32\"},{indexed:!1,name:\"peakPowerNeg\",type:\"uint32\"},{indexed:!1,name:\"latitude\",type:\"uint32\"},{indexed:!1,name:\"longitude\",type:\"uint32\"},{indexed:!1,name:\"voltageLevel\",type:\"uint32\"},{indexed:!1,name:\"location\",type:\"string\"},{indexed:!1,name:\"installDate\",type:\"string\"}],name:\"ProducerRegs\",type:\"event\"},{constant:!1,inputs:[{name:\"_enerValue\",type:\"uint32\"}],name:\"setEnerProduction\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{constant:!1,inputs:[{name:\"_owner\",type:\"string\"},{name:\"_deviceType\",type:\"string\"},{name:\"_peakPowerPos\",type:\"uint32\"},{name:\"_peakPowerNeg\",type:\"uint32\"},{name:\"_latitude\",type:\"uint32\"},{name:\"_longitude\",type:\"uint32\"},{name:\"_voltageLevel\",type:\"uint32\"},{name:\"_location\",type:\"string\"},{name:\"_installDate\",type:\"string\"}],name:\"setProducer\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{inputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"constructor\"},{constant:!0,inputs:[],name:\"countProducers\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getEnerProduction\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256\"},{name:\"\",type:\"uint32\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_proAccntAddr\",type:\"address\"}],name:\"getProAccntDetails\",outputs:[{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getProAccntsList\",outputs:[{name:\"\",type:\"address[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_proAccntAddr\",type:\"address\"}],name:\"getProBalance\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getProducer\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_proAccntAddr\",type:\"address\"}],name:\"getProEnerProduction\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"uint32[]\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"bytes32[]\"},{name:\"\",type:\"uint256[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"\",type:\"uint256\"}],name:\"proAccntList\",outputs:[{name:\"\",type:\"address\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"producerAddr\",type:\"address\"}],name:\"proAccntsArr\",outputs:[{name:\"\",type:\"bool\"}],payable:!1,stateMutability:\"view\",type:\"function\"}]).at(\"0xac364b8f99d65d86c2887914bf24e946910e557e\"),o=a.eth.contract([{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"txTime\",type:\"uint256[]\"},{indexed:!1,name:\"txValue\",type:\"uint32[]\"},{indexed:!1,name:\"blockNumber\",type:\"uint256[]\"},{indexed:!1,name:\"blockHash\",type:\"bytes32[]\"},{indexed:!1,name:\"txGasPrice\",type:\"uint256[]\"}],name:\"ConsTransactionEvent\",type:\"event\"},{constant:!1,inputs:[{name:\"_owner\",type:\"string\"},{name:\"_deviceType\",type:\"string\"},{name:\"_peakPowerPos\",type:\"uint32\"},{name:\"_peakPowerNeg\",type:\"uint32\"},{name:\"_latitude\",type:\"uint32\"},{name:\"_longitude\",type:\"uint32\"},{name:\"_voltageLevel\",type:\"uint32\"},{name:\"_location\",type:\"string\"},{name:\"_installDate\",type:\"string\"}],name:\"setConsumer\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"eTime\",type:\"uint256\"},{indexed:!1,name:\"enerAmount\",type:\"uint32\"}],name:\"EnerConsumptionEvent\",type:\"event\"},{anonymous:!1,inputs:[{indexed:!1,name:\"pvAddr\",type:\"address\"},{indexed:!1,name:\"owner\",type:\"string\"},{indexed:!1,name:\"deviceType\",type:\"string\"},{indexed:!1,name:\"peakPowerPos\",type:\"uint32\"},{indexed:!1,name:\"peakPowerNeg\",type:\"uint32\"},{indexed:!1,name:\"latitude\",type:\"uint32\"},{indexed:!1,name:\"longitude\",type:\"uint32\"},{indexed:!1,name:\"voltageLevel\",type:\"uint32\"},{indexed:!1,name:\"location\",type:\"string\"},{indexed:!1,name:\"installDate\",type:\"string\"}],name:\"ConsumerRegs\",type:\"event\"},{constant:!1,inputs:[{name:\"_enerValue\",type:\"uint32\"}],name:\"setEnerConsumption\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{inputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"constructor\"},{constant:!0,inputs:[{name:\"\",type:\"uint256\"}],name:\"consAccntList\",outputs:[{name:\"\",type:\"address\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"consumerAddr\",type:\"address\"}],name:\"consAccntsArr\",outputs:[{name:\"\",type:\"bool\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"countConsumers\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_consAccntAddr\",type:\"address\"}],name:\"getConsAccntDetails\",outputs:[{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getConsAccntsList\",outputs:[{name:\"\",type:\"address[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_consAccntAddr\",type:\"address\"}],name:\"getConsBalance\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_consAccntAddr\",type:\"address\"}],name:\"getConsEnerConsumption\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"uint32[]\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"bytes32[]\"},{name:\"\",type:\"uint256[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getConsumer\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getEnerConsumption\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256\"},{name:\"\",type:\"uint32\"}],payable:!1,stateMutability:\"view\",type:\"function\"}]).at(\"0x5f4924840c51bf5b552cacf945dd2a9b002edbbf\"),i=a;function s(e){var t=new Date(1e3*e),n=t.getFullYear(),a=(\"0\"+t.getMonth()).slice(-2);return(\"0\"+t.getDate()).slice(-2)+\"-\"+a+\"-\"+n+\" \"+(\"0\"+t.getHours()).slice(-2)+\":\"+(\"0\"+t.getMinutes()).slice(-2)+\":\"+(\"0\"+t.getSeconds()).slice(-2)}function p(){var e=i.eth.getBlock(\"latest\"),t=new Date(1e3*e.timestamp),n=t.getFullYear(),a=t.getUTCMonth()+1,r=(\"0\"+t.getUTCDate()).slice(-2),o=t.getHours(),s=\"0\"+t.getMinutes(),p=\"0\"+t.getSeconds();return n+\"-\"+a+\"-\"+r+\" \"+o+\":\"+s.substr(-2)+\":\"+p.substr(-2)}var l=[];l.push([\"Eth Address\",\"Owner\",\"Device Type\",\"Peak Power +\",\"Peak Power -\",\"Coordinates [Lat-Long]\",\"Voltage Level\",\"Location\",\"Install Date\"]),$(\"#consRegInfoButton\").click(function(){o.consAccntsArr($(\"#inputConsAddr\").val(),function(e,t){e?console.log(e):$(\"#consRegInfo\").html(\" \"+t)})}),$(\"#resetConsButton\").click(function(){document.getElementById(\"inputConsAddr\").value=\"\",$(\"#consRegInfo\").html(\"\")}),document.getElementById(\"consAccountList\").addEventListener(\"click\",function(e){if(\"LI\"==e.target.nodeName){document.getElementById(\"consAccntTitle\").innerHTML=e.target.innerHTML,o.getConsAccntDetails(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#consAccntRegDetails\").html(\"<b>Owner: </b>\"+t[0]+\"<br><b>Device Type: </b>\"+t[1]+\"<br><b>Peak Power (+): </b>\"+t[2]+\"<br><b>Location Type: </b>\"+t[3]+\"<br><b>Latitude: </b>\"+t[4]/1e4+\"<br><b>Longitude: </b>\"+t[5]/1e4+\"<br><b>Install Date: </b>\"+t[6])}),o.getConsBalance(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#consAccntBalance\").html(\"\"+t)}),o.getConsEnerConsumption(e.target.innerHTML,function(e,t){if(e)console.error(e);else{var n=document.getElementById(\"consAccount\");n.innerHTML=\"\";var a=[];a.push([\"Eth Address\",\"Time\",\"Energy\",\"Block Number\",\"BlockHash\",\"Gas Price [wei]\"]);for(var r=0;r<t[1].length;r++)a.push([t[0],s(t[1][r].c),t[2][r].c,t[3][r].c,t[4][r],t[5][r].c]);var n=document.getElementById(\"consAccount\");n.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var o=a[0].length,i=n.insertRow(-1),r=0;r<o;r++){var p=document.createElement(\"TH\");p.innerHTML=a[0][r],i.appendChild(p)}for(var r=1;r<a.length;r++){i=n.insertRow(-1);for(var l=0;l<o;l++){var u=i.insertCell(-1);u.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",u.innerHTML=a[r][l]}}}});for(var t=0;t<e.target.parentNode.children.length;t++)e.target.parentNode.children[t].classList.remove(\"active\");e.target.classList.add(\"active\")}});var u=[],c=[],d=[],m=[];m.push([\"Eth Address\",\"Time\",\"Amount\"]);var y=L.icon({iconUrl:\"../img/home.png\",iconSize:[30,40]}),g=L.map(\"map\").setView([48.77538056,9.35277778],14);L.tileLayer(\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",{attribution:'&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> Contributors',maxZoom:10}).addTo(g);var v=[];v.push([\"Eth Address\",\"Owner\",\"Device Type\",\"Peak Power +\",\"Peak Power -\",\"Coordinates [Lat-Long]\",\"Voltage Level\",\"Location\",\"Install Date\"]),$(\"#proRegInfoButton\").click(function(){r.proAccntsArr($(\"#inputProAddr\").val(),function(e,t){e?console.log(e):$(\"#proRegInfo\").html(\" \"+t)})}),$(\"#resetProButton\").click(function(){document.getElementById(\"inputProAddr\").value=\"\",$(\"#proRegInfo\").html(\"\")});var f=[],b=[],h=[],w=[];w.push([\"Eth Address\",\"Time\",\"Amount\"]),document.getElementById(\"proAccountList\").addEventListener(\"click\",function(e){if(\"LI\"==e.target.nodeName){document.getElementById(\"proAccntTitle\").innerHTML=e.target.innerHTML,r.getProAccntDetails(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#proAccntRegDetails\").html(\"<b>Owner: </b>\"+t[0]+\"<br><b>Device Type: </b>\"+t[1]+\"<br><b>Peak Power (+): </b>\"+t[2]+\"<br><b>Location Type: </b>\"+t[3]+\"<br><b>Latitude: </b>\"+t[4]/1e4+\"<br><b>Longitude: </b>\"+t[5]/1e4+\"<br><b>Install Date: </b>\"+t[6])}),r.getProBalance(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#proAccntBalance\").html(\"\"+t)}),r.getProEnerProduction(e.target.innerHTML,function(e,t){if(e)console.error(e);else{var n=document.getElementById(\"proAccount\");n.innerHTML=\"\";var a=[];a.push([\"Eth Address\",\"Time\",\"Energy\",\"Block Number\",\"BlockHash\",\"Gas Price [wei]\"]);for(var r=0;r<t[1].length;r++)a.push([t[0],s(t[1][r].c),t[2][r].c,t[3][r].c,t[4][r],t[5][r].c]);var o=document.getElementById(\"proAccount\");o.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var i=a[0].length,p=o.insertRow(-1),r=0;r<i;r++){var l=document.createElement(\"TH\");l.innerHTML=a[0][r],p.appendChild(l)}for(var r=1;r<a.length;r++){p=o.insertRow(-1);for(var u=0;u<i;u++){var c=p.insertCell(-1);c.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",c.innerHTML=a[r][u]}}}});for(var t=0;t<e.target.parentNode.children.length;t++)e.target.parentNode.children[t].classList.remove(\"active\");e.target.classList.add(\"active\")}});var x=g;window.onload=(r.ProducerRegs({},{fromBlock:0,toBlock:\"latest\"}).get(function(e,t){if(e)console.error(e);else{for(var n=0;n<t.length;n++)v.push([t[n].args.pvAddr,t[n].args.owner,t[n].args.deviceType,t[n].args.peakPowerPos,t[n].args.peakPowerNeg,t[n].args.latitude/1e4+\" \"+t[n].args.longitude/1e4,t[n].args.voltageLevel,t[n].args.location,t[n].args.installDate]);var a=document.createElement(\"Table\");a.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";var r=v[0].length,o=a.insertRow(-1);for(n=0;n<r;n++){var i=document.createElement(\"TH\");i.innerHTML=v[0][n],o.appendChild(i)}for(n=1;n<v.length;n++){o=a.insertRow(-1);for(var s=0;s<r;s++){var p=o.insertCell(-1);p.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",p.innerHTML=v[n][s]}}var l=document.getElementById(\"proRegs\");l.innerHTML=\"\",l.appendChild(a);var u=L.icon({iconUrl:\"../img/producer.png\",iconSize:[50,50]}),c=[],d=[],m=[];for(n=0;n<t.length;n++)d.push(t[n].args.latitude/1e4),m.push(t[n].args.longitude/1e4),c.push(t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4);var f=L.marker([48.77538056,9.16277778],{icon:y}).addTo(g);for(f.bindPopup(\"OLI Systems GmbH\"),f.on(\"mouseover\",function(e){this.openPopup()}),f.on(\"mouseout\",function(e){this.closePopup()}),n=0;n<d.length;n++){var b=m[n],h=d[n],w=\"Eth address: \"+t[n].args.pvAddr.slice(0,7)+\"...<br>Producer: \"+t[n].args.owner+\"<br>Location: \"+t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4,x=new L.LatLng(h,b);c=new L.Marker(x,{icon:u}),g.addLayer(c),c.bindPopup(w)}}}),r.ProducerRegs({fromBlock:\"latest\",toBlock:\"latest\"}).watch(function(e,t){e&&console.log(e)}),r.getProAccntsList(function(e,t){if(e)console.log(e);else{t.shift();for(var n=0;n<t.length;n++)$(\"#proAccountList\").prepend(\"<li>\"+t[n]+\"</li>\")}}),r.countProducers(function(e,t){e?console.log(e):$(\"#proCounter\").html(\" \"+t)}),r.EnerProductionEvent({fromBlock:\"latest\",toBlock:\"latest\"}).watch(function(e,t){if(e)console.log(e);else{w.push([t.args.oliAddr,s(t.args.eTime),t.args.enerAmount]);var n=document.createElement(\"Table\");n.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var a=w[0].length,r=n.insertRow(-1),o=0;o<a;o++){var i=document.createElement(\"TH\");i.innerHTML=w[0][o],r.appendChild(i)}for(o=1;o<w.length;o++){r=n.insertRow(-1);for(var l=0;l<a;l++){var d=r.insertCell(-1);d.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",d.innerHTML=w[o][l]}}var m=document.getElementById(\"realTimeProdunction\");m.innerHTML=\"\",m.appendChild(n),f.push(t.args.enerAmount.c[0]),b.push(p());var y=[],g=[],v={};for(var x in b.forEach((e,t)=>v[e]=f[t]),v)v.hasOwnProperty(x);var L={},T={};L.time=x,T.energy=v[x];var P=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(L,T);h.push(P);var A={};h.forEach(function(e){A.hasOwnProperty(e.time)?A[e.time]=A[e.time]+e.energy:A[e.time]=e.energy});var k=[];for(var M in A)k.push({time:M,energy:A[M]});for(var x in k)k.hasOwnProperty(x)&&(g.push(k[x].time),y.push(k[x].energy));function E(e){return new Date(e)}b=g,(f=y).length>10&&(f=f.slice(-10),b=b.slice(-10));var C=[{type:\"date\",mode:\"lines+markers\",name:\"Producer\",x:b.map(E),y:f,line:{color:\"#009933\"}},{type:\"scatter\",mode:\"lines+markers\",name:\"Consumer\",x:c.map(E),y:u,line:{color:\"#cc6600\"}}];Plotly.newPlot(\"realTimeProGraph\",C,{xaxis:{title:\"Time\",tickformat:\"%H:%M:%S\",linecolor:\"lightgray\",linewidth:.5,titlefont:{color:\"black\"}},yaxis:{title:\"Energy [kWh] per Block\",tickformat:\"none\",linecolor:\"lightgray\",linewidth:.5,titlefont:{color:\"black\"}},margin:{l:80,r:30,b:50,t:15,pad:4}})}}),o.ConsumerRegs({},{fromBlock:0,toBlock:\"latest\"}).get(function(e,t){if(e)console.error(e);else{for(var n=0;n<t.length;n++)l.push([t[n].args.pvAddr,t[n].args.owner,t[n].args.deviceType,t[n].args.peakPowerPos,t[n].args.peakPowerNeg,t[n].args.latitude/1e4+\" \"+t[n].args.longitude/1e4,t[n].args.voltageLevel,t[n].args.location,t[n].args.installDate]);var a=document.createElement(\"Table\");a.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";var r=l[0].length,o=a.insertRow(-1);for(n=0;n<r;n++){var i=document.createElement(\"TH\");i.innerHTML=l[0][n],o.appendChild(i)}for(n=1;n<l.length;n++){o=a.insertRow(-1);for(var s=0;s<r;s++){var p=o.insertCell(-1);p.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",p.innerHTML=l[n][s]}}var u=document.getElementById(\"consRegs\");u.innerHTML=\"\",u.appendChild(a);var c=L.icon({iconUrl:\"../img/consumer.png\",iconSize:[50,50]}),d=[],m=[],y=[];for(n=0;n<t.length;n++)m.push(t[n].args.latitude/1e4),y.push(t[n].args.longitude/1e4),d.push(t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4);for(n=0;n<m.length;n++){var g=y[n],v=m[n],f=\"Eth address: \"+t[n].args.pvAddr.slice(0,7)+\"...<br>Consumer: \"+t[n].args.owner+\"<br>Location: \"+t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4,b=new L.LatLng(v,g);d=new L.Marker(b,{icon:c}),x.addLayer(d),d.bindPopup(f)}}}),o.getConsAccntsList(function(e,t){if(e)console.log(e);else{t.shift();for(var n=0;n<t.length;n++)$(\"#consAccountList\").prepend(\"<li>\"+t[n]+\"</li>\")}}),o.countConsumers(function(e,t){e?console.log(e):$(\"#consCounter\").html(\" \"+t)}),void o.EnerConsumptionEvent({fromBlock:\"latest\",toBlock:\"latest\"}).watch(function(e,t){if(e)console.log(e);else{m.push([t.args.oliAddr,s(t.args.eTime),t.args.enerAmount]);var n=document.createElement(\"Table\");n.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var a=m[0].length,r=n.insertRow(-1),o=0;o<a;o++){var i=document.createElement(\"TH\");i.innerHTML=m[0][o],r.appendChild(i)}for(o=1;o<m.length;o++){r=n.insertRow(-1);for(var l=0;l<a;l++){var y=r.insertCell(-1);y.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",y.innerHTML=m[o][l]}}var g=document.getElementById(\"realTimeConsumption\");g.innerHTML=\"\",g.appendChild(n),u.push(t.args.enerAmount.c[0]),c.push(p());var v=[],f=[],b={};for(var h in c.forEach((e,t)=>b[e]=u[t]),b)b.hasOwnProperty(h);var w={},x={};w.time=h,x.energy=b[h];var L=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(w,x);d.push(L);var T={};d.forEach(function(e){T.hasOwnProperty(e.time)?T[e.time]=T[e.time]+e.energy:T[e.time]=e.energy});var P=[];for(var A in T)P.push({time:A,energy:T[A]});for(var h in P)P.hasOwnProperty(h)&&(f.push(P[h].time),v.push(P[h].energy));c=f,(u=v).length>10&&(u=u.slice(-10),c=c.slice(-10))}}))}]);","extractedComments":[]}