{"code":"!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";n.r(t),\"undefined\"!=typeof web3?web3=new Web3(web3.currentProvider):web3=new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"));var a=web3.eth.contract([{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"txTime\",type:\"uint256[]\"},{indexed:!1,name:\"txValue\",type:\"uint32[]\"},{indexed:!1,name:\"blockNumber\",type:\"uint256[]\"},{indexed:!1,name:\"blockHash\",type:\"bytes32[]\"},{indexed:!1,name:\"txGasPrice\",type:\"uint256[]\"}],name:\"ProTransactionEvent\",type:\"event\"},{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"eTime\",type:\"uint256\"},{indexed:!1,name:\"enerAmount\",type:\"uint32\"}],name:\"EnerProductionEvent\",type:\"event\"},{anonymous:!1,inputs:[{indexed:!1,name:\"pvAddr\",type:\"address\"},{indexed:!1,name:\"owner\",type:\"string\"},{indexed:!1,name:\"deviceType\",type:\"string\"},{indexed:!1,name:\"peakPowerPos\",type:\"uint32\"},{indexed:!1,name:\"peakPowerNeg\",type:\"uint32\"},{indexed:!1,name:\"latitude\",type:\"uint32\"},{indexed:!1,name:\"longitude\",type:\"uint32\"},{indexed:!1,name:\"voltageLevel\",type:\"uint32\"},{indexed:!1,name:\"location\",type:\"string\"},{indexed:!1,name:\"installDate\",type:\"string\"}],name:\"ProducerRegs\",type:\"event\"},{constant:!1,inputs:[{name:\"_enerValue\",type:\"uint32\"}],name:\"setEnerProduction\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{constant:!1,inputs:[{name:\"_owner\",type:\"string\"},{name:\"_deviceType\",type:\"string\"},{name:\"_peakPowerPos\",type:\"uint32\"},{name:\"_peakPowerNeg\",type:\"uint32\"},{name:\"_latitude\",type:\"uint32\"},{name:\"_longitude\",type:\"uint32\"},{name:\"_voltageLevel\",type:\"uint32\"},{name:\"_location\",type:\"string\"},{name:\"_installDate\",type:\"string\"}],name:\"setProducer\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{inputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"constructor\"},{constant:!0,inputs:[],name:\"countProducers\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getEnerProduction\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256\"},{name:\"\",type:\"uint32\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_proAccntAddr\",type:\"address\"}],name:\"getProAccntDetails\",outputs:[{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getProAccntsList\",outputs:[{name:\"\",type:\"address[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_proAccntAddr\",type:\"address\"}],name:\"getProBalance\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getProducer\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_proAccntAddr\",type:\"address\"}],name:\"getProEnerProduction\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"uint32[]\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"bytes32[]\"},{name:\"\",type:\"uint256[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"\",type:\"uint256\"}],name:\"proAccntList\",outputs:[{name:\"\",type:\"address\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"producerAddr\",type:\"address\"}],name:\"proAccntsArr\",outputs:[{name:\"\",type:\"bool\"}],payable:!1,stateMutability:\"view\",type:\"function\"}]).at(\"0x844453c40c352d9505b8e89ac1fe3efdefbf68d2\"),o=web3.eth.contract([{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"txTime\",type:\"uint256[]\"},{indexed:!1,name:\"txValue\",type:\"uint32[]\"},{indexed:!1,name:\"blockNumber\",type:\"uint256[]\"},{indexed:!1,name:\"blockHash\",type:\"bytes32[]\"},{indexed:!1,name:\"txGasPrice\",type:\"uint256[]\"}],name:\"ConsTransactionEvent\",type:\"event\"},{constant:!1,inputs:[{name:\"_owner\",type:\"string\"},{name:\"_deviceType\",type:\"string\"},{name:\"_peakPowerPos\",type:\"uint32\"},{name:\"_peakPowerNeg\",type:\"uint32\"},{name:\"_latitude\",type:\"uint32\"},{name:\"_longitude\",type:\"uint32\"},{name:\"_voltageLevel\",type:\"uint32\"},{name:\"_location\",type:\"string\"},{name:\"_installDate\",type:\"string\"}],name:\"setConsumer\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"eTime\",type:\"uint256\"},{indexed:!1,name:\"enerAmount\",type:\"uint32\"}],name:\"EnerConsumptionEvent\",type:\"event\"},{anonymous:!1,inputs:[{indexed:!1,name:\"pvAddr\",type:\"address\"},{indexed:!1,name:\"owner\",type:\"string\"},{indexed:!1,name:\"deviceType\",type:\"string\"},{indexed:!1,name:\"peakPowerPos\",type:\"uint32\"},{indexed:!1,name:\"peakPowerNeg\",type:\"uint32\"},{indexed:!1,name:\"latitude\",type:\"uint32\"},{indexed:!1,name:\"longitude\",type:\"uint32\"},{indexed:!1,name:\"voltageLevel\",type:\"uint32\"},{indexed:!1,name:\"location\",type:\"string\"},{indexed:!1,name:\"installDate\",type:\"string\"}],name:\"ConsumerRegs\",type:\"event\"},{constant:!1,inputs:[{name:\"_enerValue\",type:\"uint32\"}],name:\"setEnerConsumption\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{inputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"constructor\"},{constant:!0,inputs:[{name:\"\",type:\"uint256\"}],name:\"consAccntList\",outputs:[{name:\"\",type:\"address\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"consumerAddr\",type:\"address\"}],name:\"consAccntsArr\",outputs:[{name:\"\",type:\"bool\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"countConsumers\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_consAccntAddr\",type:\"address\"}],name:\"getConsAccntDetails\",outputs:[{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getConsAccntsList\",outputs:[{name:\"\",type:\"address[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_consAccntAddr\",type:\"address\"}],name:\"getConsBalance\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_consAccntAddr\",type:\"address\"}],name:\"getConsEnerConsumption\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"uint32[]\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"bytes32[]\"},{name:\"\",type:\"uint256[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getConsumer\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getEnerConsumption\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256\"},{name:\"\",type:\"uint32\"}],payable:!1,stateMutability:\"view\",type:\"function\"}]).at(\"0xf197a8b1cc4d98b1b33609731fc3f3c7737a3026\");function r(e){var t=new Date(1e3*e),n=t.getFullYear(),a=(\"0\"+t.getMonth()).slice(-2);return(\"0\"+t.getDate()).slice(-2)+\"-\"+a+\"-\"+n+\" \"+(\"0\"+t.getHours()).slice(-2)+\":\"+(\"0\"+t.getMinutes()).slice(-2)+\":\"+(\"0\"+t.getSeconds()).slice(-2)}function s(){var e=web3.eth.getBlock(\"latest\"),t=new Date(1e3*e.timestamp),n=t.getFullYear(),a=t.getUTCMonth()+1,o=(\"0\"+t.getUTCDate()).slice(-2),r=t.getHours(),i=\"0\"+t.getMinutes(),s=\"0\"+t.getSeconds();return n+\"-\"+a+\"-\"+o+\" \"+r+\":\"+i.substr(-2)+\":\"+s.substr(-2)}\"undefined\"!=typeof web3?web3=new Web3(web3.currentProvider):web3=new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"));var p=[];p.push([\"Eth Address\",\"Owner\",\"Device Type\",\"Peak Power +\",\"Peak Power -\",\"Coordinates [Lat-Long]\",\"Voltage Level\",\"Location\",\"Install Date\"]),$(\"#consRegInfoButton\").click(function(){o.consAccntsArr($(\"#inputConsAddr\").val(),function(e,t){e?console.log(e):$(\"#consRegInfo\").html(\" \"+t)})}),$(\"#resetConsButton\").click(function(){document.getElementById(\"inputConsAddr\").value=\"\",$(\"#consRegInfo\").html(\"\")}),consAccntList=document.getElementById(\"consAccountList\"),consAccntList.addEventListener(\"click\",function(e){if(\"LI\"==e.target.nodeName){for(document.getElementById(\"consAccntTitle\").innerHTML=e.target.innerHTML,o.getConsAccntDetails(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#consAccntRegDetails\").html(\"<b>Owner: </b>\"+t[0]+\"<br><b>Device Type: </b>\"+t[1]+\"<br><b>Peak Power (+): </b>\"+t[2]+\"<br><b>Location Type: </b>\"+t[3]+\"<br><b>Latitude: </b>\"+t[4]/1e4+\"<br><b>Longitude: </b>\"+t[5]/1e4+\"<br><b>Install Date: </b>\"+t[6])}),o.getConsBalance(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#consAccntBalance\").html(\"\"+t)}),o.getConsEnerConsumption(e.target.innerHTML,function(e,t){if(e)console.error(e);else{var n=document.getElementById(\"consAccount\");n.innerHTML=\"\";var a=[];a.push([\"Eth Address\",\"Time\",\"Energy\",\"Block Number\",\"BlockHash\",\"Gas Price [wei]\"]);for(var o=0;o<t[1].length;o++)a.push([t[0],r(t[1][o].c),t[2][o].c,t[3][o].c,t[4][o],t[5][o].c]);var n=document.getElementById(\"consAccount\");n.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var i=a[0].length,s=n.insertRow(-1),o=0;o<i;o++){var p=document.createElement(\"TH\");p.innerHTML=a[0][o],s.appendChild(p)}for(var o=1;o<a.length;o++){s=n.insertRow(-1);for(var l=0;l<i;l++){var c=s.insertCell(-1);c.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",c.innerHTML=a[o][l]}}}}),i=0;i<e.target.parentNode.children.length;i++)e.target.parentNode.children[i].classList.remove(\"active\");e.target.classList.add(\"active\")}});var l=[],c=[],u=[],d=[];d.push([\"Eth Address\",\"Time\",\"Amount\"]);var m=L.icon({iconUrl:\"../../img/home.png\",iconSize:[30,40]}),y=L.map(\"map\").setView([48.77538056,9.35277778],14);mapLink='<a href=\"http://openstreetmap.org\">OpenStreetMap</a>',L.tileLayer(\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",{attribution:\"&copy; \"+mapLink+\" Contributors\",maxZoom:10}).addTo(y);var g=[];g.push([\"Eth Address\",\"Owner\",\"Device Type\",\"Peak Power +\",\"Peak Power -\",\"Coordinates [Lat-Long]\",\"Voltage Level\",\"Location\",\"Install Date\"]),$(\"#proRegInfoButton\").click(function(){a.proAccntsArr($(\"#inputProAddr\").val(),function(e,t){e?console.log(e):$(\"#proRegInfo\").html(\" \"+t)})}),$(\"#resetProButton\").click(function(){document.getElementById(\"inputProAddr\").value=\"\",$(\"#proRegInfo\").html(\"\")});var b=[],v=[],f=[],h=[];h.push([\"Eth Address\",\"Time\",\"Amount\"]),proAccntList=document.getElementById(\"proAccountList\"),proAccntList.addEventListener(\"click\",function(e){if(\"LI\"==e.target.nodeName){for(document.getElementById(\"proAccntTitle\").innerHTML=e.target.innerHTML,a.getProAccntDetails(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#proAccntRegDetails\").html(\"<b>Owner: </b>\"+t[0]+\"<br><b>Device Type: </b>\"+t[1]+\"<br><b>Peak Power (+): </b>\"+t[2]+\"<br><b>Location Type: </b>\"+t[3]+\"<br><b>Latitude: </b>\"+t[4]/1e4+\"<br><b>Longitude: </b>\"+t[5]/1e4+\"<br><b>Install Date: </b>\"+t[6])}),a.getProBalance(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#proAccntBalance\").html(\"\"+t)}),a.getProEnerProduction(e.target.innerHTML,function(e,t){if(e)console.error(e);else{var n=document.getElementById(\"proAccount\");n.innerHTML=\"\";var a=[];a.push([\"Eth Address\",\"Time\",\"Energy\",\"Block Number\",\"BlockHash\",\"Gas Price [wei]\"]);for(var o=0;o<t[1].length;o++)a.push([t[0],r(t[1][o].c),t[2][o].c,t[3][o].c,t[4][o],t[5][o].c]);var i=document.getElementById(\"proAccount\");i.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var s=a[0].length,p=i.insertRow(-1),o=0;o<s;o++){var l=document.createElement(\"TH\");l.innerHTML=a[0][o],p.appendChild(l)}for(var o=1;o<a.length;o++){p=i.insertRow(-1);for(var c=0;c<s;c++){var u=p.insertCell(-1);u.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",u.innerHTML=a[o][c]}}}}),i=0;i<e.target.parentNode.children.length;i++)e.target.parentNode.children[i].classList.remove(\"active\");e.target.classList.add(\"active\")}}),window.onload=(a.ProducerRegs({},{fromBlock:0,toBlock:\"latest\"}).get(function(e,t){if(e)console.error(e);else{for(var n=0;n<t.length;n++)g.push([t[n].args.pvAddr,t[n].args.owner,t[n].args.deviceType,t[n].args.peakPowerPos,t[n].args.peakPowerNeg,t[n].args.latitude/1e4+\" \"+t[n].args.longitude/1e4,t[n].args.voltageLevel,t[n].args.location,t[n].args.installDate]);var a=document.createElement(\"Table\");a.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";var o=g[0].length,r=a.insertRow(-1);for(n=0;n<o;n++){var i=document.createElement(\"TH\");i.innerHTML=g[0][n],r.appendChild(i)}for(n=1;n<g.length;n++){r=a.insertRow(-1);for(var s=0;s<o;s++){var p=r.insertCell(-1);p.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",p.innerHTML=g[n][s]}}var l=document.getElementById(\"proRegs\");l.innerHTML=\"\",l.appendChild(a);var c=L.icon({iconUrl:\"../../img/producer.png\",iconSize:[50,50]}),u=[],d=[],b=[];for(n=0;n<t.length;n++)d.push(t[n].args.latitude/1e4),b.push(t[n].args.longitude/1e4),u.push(t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4);var v=L.marker([48.77538056,9.16277778],{icon:m}).addTo(y);for(v.bindPopup(\"OLI Systems GmbH\"),v.on(\"mouseover\",function(e){this.openPopup()}),v.on(\"mouseout\",function(e){this.closePopup()}),n=0;n<d.length;n++){var f=b[n],h=d[n],w=\"Eth address: \"+t[n].args.pvAddr.slice(0,7)+\"...<br>Producer: \"+t[n].args.owner+\"<br>Location: \"+t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4,x=new L.LatLng(h,f);u=new L.Marker(x,{icon:c}),y.addLayer(u),u.bindPopup(w)}}}),a.ProducerRegs({fromBlock:\"latest\",toBlock:\"latest\"}).watch(function(e,t){e&&console.log(e)}),a.getProAccntsList(function(e,t){if(e)console.log(e);else{t.shift();for(var n=0;n<t.length;n++)$(\"#proAccountList\").prepend(\"<li>\"+t[n]+\"</li>\")}}),a.countProducers(function(e,t){e?console.log(e):$(\"#proCounter\").html(\" \"+t)}),a.EnerProductionEvent({fromBlock:\"latest\",toBlock:\"latest\"}).watch(function(e,t){if(e)console.log(e);else{h.push([t.args.oliAddr,r(t.args.eTime),t.args.enerAmount]);var n=document.createElement(\"Table\");n.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var a=h[0].length,o=n.insertRow(-1),i=0;i<a;i++){var p=document.createElement(\"TH\");p.innerHTML=h[0][i],o.appendChild(p)}for(i=1;i<h.length;i++){o=n.insertRow(-1);for(var l=0;l<a;l++){var c=o.insertCell(-1);c.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",c.innerHTML=h[i][l]}}var u=document.getElementById(\"realTimeProdunction\");u.innerHTML=\"\",u.appendChild(n),b.push(t.args.enerAmount.c[0]),v.push(s());var d=[],m=[],y={};for(var g in v.forEach((e,t)=>y[e]=b[t]),y)y.hasOwnProperty(g);var w={},x={};w.time=g,x.energy=y[g];var L=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(w,x);f.push(L);var P={};f.forEach(function(e){P.hasOwnProperty(e.time)?P[e.time]=P[e.time]+e.energy:P[e.time]=e.energy});var T=[];for(var A in P)T.push({time:A,energy:P[A]});for(var g in T)T.hasOwnProperty(g)&&(m.push(T[g].time),d.push(T[g].energy));function k(e){return new Date(e)}v=m,(b=d).length>10&&(b=b.slice(-10),v=v.slice(-10));var M=[{type:\"date\",mode:\"lines+markers\",name:\"Producer\",x:v.map(k),y:b,line:{color:\"#009933\"}},{type:\"scatter\",mode:\"lines+markers\",name:\"Consumer\",x:(void 0).map(k),y:void 0,line:{color:\"#cc6600\"}}];Plotly.newPlot(\"realTimeProGraph\",M,{xaxis:{title:\"Time\",tickformat:\"%H:%M:%S\",linecolor:\"lightgray\",linewidth:.5,titlefont:{color:\"black\"}},yaxis:{title:\"Energy [kWh] per Block\",tickformat:\"none\",linecolor:\"lightgray\",linewidth:.5,titlefont:{color:\"black\"}},margin:{l:80,r:30,b:50,t:15,pad:4}})}}),o.ConsumerRegs({},{fromBlock:0,toBlock:\"latest\"}).get(function(e,t){if(e)console.error(e);else{for(var n=0;n<t.length;n++)p.push([t[n].args.pvAddr,t[n].args.owner,t[n].args.deviceType,t[n].args.peakPowerPos,t[n].args.peakPowerNeg,t[n].args.latitude/1e4+\" \"+t[n].args.longitude/1e4,t[n].args.voltageLevel,t[n].args.location,t[n].args.installDate]);var a=document.createElement(\"Table\");a.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";var o=p[0].length,r=a.insertRow(-1);for(n=0;n<o;n++){var i=document.createElement(\"TH\");i.innerHTML=p[0][n],r.appendChild(i)}for(n=1;n<p.length;n++){r=a.insertRow(-1);for(var s=0;s<o;s++){var l=r.insertCell(-1);l.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",l.innerHTML=p[n][s]}}var c=document.getElementById(\"consRegs\");c.innerHTML=\"\",c.appendChild(a);var u=L.icon({iconUrl:\"../../img/consumer.png\",iconSize:[50,50]}),d=[],m=[],g=[];for(n=0;n<t.length;n++)m.push(t[n].args.latitude/1e4),g.push(t[n].args.longitude/1e4),d.push(t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4);for(n=0;n<m.length;n++){var b=g[n],v=m[n],f=\"Eth address: \"+t[n].args.pvAddr.slice(0,7)+\"...<br>Consumer: \"+t[n].args.owner+\"<br>Location: \"+t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4,h=new L.LatLng(v,b);d=new L.Marker(h,{icon:u}),y.addLayer(d),d.bindPopup(f)}}}),o.getConsAccntsList(function(e,t){if(e)console.log(e);else{t.shift();for(var n=0;n<t.length;n++)$(\"#consAccountList\").prepend(\"<li>\"+t[n]+\"</li>\")}}),o.countConsumers(function(e,t){e?console.log(e):$(\"#consCounter\").html(\" \"+t)}),void o.EnerConsumptionEvent({fromBlock:\"latest\",toBlock:\"latest\"}).watch(function(e,t){if(e)console.log(e);else{d.push([t.args.oliAddr,r(t.args.eTime),t.args.enerAmount]);var n=document.createElement(\"Table\");n.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var a=d[0].length,o=n.insertRow(-1),i=0;i<a;i++){var p=document.createElement(\"TH\");p.innerHTML=d[0][i],o.appendChild(p)}for(i=1;i<d.length;i++){o=n.insertRow(-1);for(var m=0;m<a;m++){var y=o.insertCell(-1);y.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",y.innerHTML=d[i][m]}}var g=document.getElementById(\"realTimeConsumption\");g.innerHTML=\"\",g.appendChild(n),l.push(t.args.enerAmount.c[0]),c.push(s());var b=[],v=[],f={};for(var h in c.forEach((e,t)=>f[e]=l[t]),f)f.hasOwnProperty(h);var w={},x={};w.time=h,x.energy=f[h];var L=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(w,x);u.push(L);var P={};u.forEach(function(e){P.hasOwnProperty(e.time)?P[e.time]=P[e.time]+e.energy:P[e.time]=e.energy});var T=[];for(var A in P)T.push({time:A,energy:P[A]});for(var h in T)T.hasOwnProperty(h)&&(v.push(T[h].time),b.push(T[h].energy));c=v,(l=b).length>10&&(l=l.slice(-10),c=c.slice(-10))}}))}]);","extractedComments":[]}