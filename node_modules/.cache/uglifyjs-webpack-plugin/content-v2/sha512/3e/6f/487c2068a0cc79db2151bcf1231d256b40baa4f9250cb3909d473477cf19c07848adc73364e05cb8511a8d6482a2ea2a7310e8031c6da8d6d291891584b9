{"code":"!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t){throw new Error(\"Module parse failed: Unexpected token (1:7)\\nYou may need an appropriate loader to handle this file type.\\n| import default web3 from './contracts.js';\\r\\n| // // setting up the provider\\r\\n| // if (typeof web3 !== 'undefined') {\\r\")},function(e,t,n){\"use strict\";var a;n.r(t);var r=(a=void 0!==a?new Web3(a.currentProvider):new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"))).eth.contract([{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"txTime\",type:\"uint256[]\"},{indexed:!1,name:\"txValue\",type:\"uint32[]\"},{indexed:!1,name:\"blockNumber\",type:\"uint256[]\"},{indexed:!1,name:\"blockHash\",type:\"bytes32[]\"},{indexed:!1,name:\"txGasPrice\",type:\"uint256[]\"}],name:\"ProTransactionEvent\",type:\"event\"},{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"eTime\",type:\"uint256\"},{indexed:!1,name:\"enerAmount\",type:\"uint32\"}],name:\"EnerProductionEvent\",type:\"event\"},{anonymous:!1,inputs:[{indexed:!1,name:\"pvAddr\",type:\"address\"},{indexed:!1,name:\"owner\",type:\"string\"},{indexed:!1,name:\"deviceType\",type:\"string\"},{indexed:!1,name:\"peakPowerPos\",type:\"uint32\"},{indexed:!1,name:\"peakPowerNeg\",type:\"uint32\"},{indexed:!1,name:\"latitude\",type:\"uint32\"},{indexed:!1,name:\"longitude\",type:\"uint32\"},{indexed:!1,name:\"voltageLevel\",type:\"uint32\"},{indexed:!1,name:\"location\",type:\"string\"},{indexed:!1,name:\"installDate\",type:\"string\"}],name:\"ProducerRegs\",type:\"event\"},{constant:!1,inputs:[{name:\"_enerValue\",type:\"uint32\"}],name:\"setEnerProduction\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{constant:!1,inputs:[{name:\"_owner\",type:\"string\"},{name:\"_deviceType\",type:\"string\"},{name:\"_peakPowerPos\",type:\"uint32\"},{name:\"_peakPowerNeg\",type:\"uint32\"},{name:\"_latitude\",type:\"uint32\"},{name:\"_longitude\",type:\"uint32\"},{name:\"_voltageLevel\",type:\"uint32\"},{name:\"_location\",type:\"string\"},{name:\"_installDate\",type:\"string\"}],name:\"setProducer\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{inputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"constructor\"},{constant:!0,inputs:[],name:\"countProducers\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getEnerProduction\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256\"},{name:\"\",type:\"uint32\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_proAccntAddr\",type:\"address\"}],name:\"getProAccntDetails\",outputs:[{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getProAccntsList\",outputs:[{name:\"\",type:\"address[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_proAccntAddr\",type:\"address\"}],name:\"getProBalance\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getProducer\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_proAccntAddr\",type:\"address\"}],name:\"getProEnerProduction\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"uint32[]\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"bytes32[]\"},{name:\"\",type:\"uint256[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"\",type:\"uint256\"}],name:\"proAccntList\",outputs:[{name:\"\",type:\"address\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"producerAddr\",type:\"address\"}],name:\"proAccntsArr\",outputs:[{name:\"\",type:\"bool\"}],payable:!1,stateMutability:\"view\",type:\"function\"}]).at(\"0x844453c40c352d9505b8e89ac1fe3efdefbf68d2\"),o=a.eth.contract([{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"txTime\",type:\"uint256[]\"},{indexed:!1,name:\"txValue\",type:\"uint32[]\"},{indexed:!1,name:\"blockNumber\",type:\"uint256[]\"},{indexed:!1,name:\"blockHash\",type:\"bytes32[]\"},{indexed:!1,name:\"txGasPrice\",type:\"uint256[]\"}],name:\"ConsTransactionEvent\",type:\"event\"},{constant:!1,inputs:[{name:\"_owner\",type:\"string\"},{name:\"_deviceType\",type:\"string\"},{name:\"_peakPowerPos\",type:\"uint32\"},{name:\"_peakPowerNeg\",type:\"uint32\"},{name:\"_latitude\",type:\"uint32\"},{name:\"_longitude\",type:\"uint32\"},{name:\"_voltageLevel\",type:\"uint32\"},{name:\"_location\",type:\"string\"},{name:\"_installDate\",type:\"string\"}],name:\"setConsumer\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{anonymous:!1,inputs:[{indexed:!1,name:\"oliAddr\",type:\"address\"},{indexed:!1,name:\"eTime\",type:\"uint256\"},{indexed:!1,name:\"enerAmount\",type:\"uint32\"}],name:\"EnerConsumptionEvent\",type:\"event\"},{anonymous:!1,inputs:[{indexed:!1,name:\"pvAddr\",type:\"address\"},{indexed:!1,name:\"owner\",type:\"string\"},{indexed:!1,name:\"deviceType\",type:\"string\"},{indexed:!1,name:\"peakPowerPos\",type:\"uint32\"},{indexed:!1,name:\"peakPowerNeg\",type:\"uint32\"},{indexed:!1,name:\"latitude\",type:\"uint32\"},{indexed:!1,name:\"longitude\",type:\"uint32\"},{indexed:!1,name:\"voltageLevel\",type:\"uint32\"},{indexed:!1,name:\"location\",type:\"string\"},{indexed:!1,name:\"installDate\",type:\"string\"}],name:\"ConsumerRegs\",type:\"event\"},{constant:!1,inputs:[{name:\"_enerValue\",type:\"uint32\"}],name:\"setEnerConsumption\",outputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"function\"},{inputs:[],payable:!1,stateMutability:\"nonpayable\",type:\"constructor\"},{constant:!0,inputs:[{name:\"\",type:\"uint256\"}],name:\"consAccntList\",outputs:[{name:\"\",type:\"address\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"consumerAddr\",type:\"address\"}],name:\"consAccntsArr\",outputs:[{name:\"\",type:\"bool\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"countConsumers\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_consAccntAddr\",type:\"address\"}],name:\"getConsAccntDetails\",outputs:[{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getConsAccntsList\",outputs:[{name:\"\",type:\"address[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_consAccntAddr\",type:\"address\"}],name:\"getConsBalance\",outputs:[{name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{name:\"_consAccntAddr\",type:\"address\"}],name:\"getConsEnerConsumption\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"uint32[]\"},{name:\"\",type:\"uint256[]\"},{name:\"\",type:\"bytes32[]\"},{name:\"\",type:\"uint256[]\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getConsumer\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"uint32\"},{name:\"\",type:\"string\"},{name:\"\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[],name:\"getEnerConsumption\",outputs:[{name:\"\",type:\"address\"},{name:\"\",type:\"uint256\"},{name:\"\",type:\"uint32\"}],payable:!1,stateMutability:\"view\",type:\"function\"}]).at(\"0xf197a8b1cc4d98b1b33609731fc3f3c7737a3026\"),s=n(0);var p=[];p.push([\"Eth Address\",\"Owner\",\"Device Type\",\"Peak Power +\",\"Peak Power -\",\"Coordinates [Lat-Long]\",\"Voltage Level\",\"Location\",\"Install Date\"]),$(\"#consRegInfoButton\").click(function(){o.consAccntsArr($(\"#inputConsAddr\").val(),function(e,t){e?console.log(e):$(\"#consRegInfo\").html(\" \"+t)})}),$(\"#resetConsButton\").click(function(){document.getElementById(\"inputConsAddr\").value=\"\",$(\"#consRegInfo\").html(\"\")}),consAccntList=document.getElementById(\"consAccountList\"),consAccntList.addEventListener(\"click\",function(e){if(\"LI\"==e.target.nodeName){for(document.getElementById(\"consAccntTitle\").innerHTML=e.target.innerHTML,o.getConsAccntDetails(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#consAccntRegDetails\").html(\"<b>Owner: </b>\"+t[0]+\"<br><b>Device Type: </b>\"+t[1]+\"<br><b>Peak Power (+): </b>\"+t[2]+\"<br><b>Location Type: </b>\"+t[3]+\"<br><b>Latitude: </b>\"+t[4]/1e4+\"<br><b>Longitude: </b>\"+t[5]/1e4+\"<br><b>Install Date: </b>\"+t[6])}),o.getConsBalance(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#consAccntBalance\").html(\"\"+t)}),o.getConsEnerConsumption(e.target.innerHTML,function(e,t){if(e)console.error(e);else{var n=document.getElementById(\"consAccount\");n.innerHTML=\"\";var a=[];a.push([\"Eth Address\",\"Time\",\"Energy\",\"Block Number\",\"BlockHash\",\"Gas Price [wei]\"]);for(var r=0;r<t[1].length;r++)a.push([t[0],Object(s.timeConverter)(t[1][r].c),t[2][r].c,t[3][r].c,t[4][r],t[5][r].c]);var n=document.getElementById(\"consAccount\");n.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var o=a[0].length,i=n.insertRow(-1),r=0;r<o;r++){var p=document.createElement(\"TH\");p.innerHTML=a[0][r],i.appendChild(p)}for(var r=1;r<a.length;r++){i=n.insertRow(-1);for(var c=0;c<o;c++){var l=i.insertCell(-1);l.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",l.innerHTML=a[r][c]}}}}),i=0;i<e.target.parentNode.children.length;i++)e.target.parentNode.children[i].classList.remove(\"active\");e.target.classList.add(\"active\")}});var c=[],l=[],u=[],d=[];d.push([\"Eth Address\",\"Time\",\"Amount\"]);var m=L.icon({iconUrl:\"../../img/home.png\",iconSize:[30,40]}),y=L.map(\"map\").setView([48.77538056,9.35277778],14);mapLink='<a href=\"http://openstreetmap.org\">OpenStreetMap</a>',L.tileLayer(\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",{attribution:\"&copy; \"+mapLink+\" Contributors\",maxZoom:10}).addTo(y);var g=[];g.push([\"Eth Address\",\"Owner\",\"Device Type\",\"Peak Power +\",\"Peak Power -\",\"Coordinates [Lat-Long]\",\"Voltage Level\",\"Location\",\"Install Date\"]),$(\"#proRegInfoButton\").click(function(){r.proAccntsArr($(\"#inputProAddr\").val(),function(e,t){e?console.log(e):$(\"#proRegInfo\").html(\" \"+t)})}),$(\"#resetProButton\").click(function(){document.getElementById(\"inputProAddr\").value=\"\",$(\"#proRegInfo\").html(\"\")});var v=[],f=[],b=[],h=[];h.push([\"Eth Address\",\"Time\",\"Amount\"]),proAccntList=document.getElementById(\"proAccountList\"),proAccntList.addEventListener(\"click\",function(e){if(\"LI\"==e.target.nodeName){for(document.getElementById(\"proAccntTitle\").innerHTML=e.target.innerHTML,r.getProAccntDetails(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#proAccntRegDetails\").html(\"<b>Owner: </b>\"+t[0]+\"<br><b>Device Type: </b>\"+t[1]+\"<br><b>Peak Power (+): </b>\"+t[2]+\"<br><b>Location Type: </b>\"+t[3]+\"<br><b>Latitude: </b>\"+t[4]/1e4+\"<br><b>Longitude: </b>\"+t[5]/1e4+\"<br><b>Install Date: </b>\"+t[6])}),r.getProBalance(e.target.innerHTML,function(e,t){e?console.log(e):$(\"#proAccntBalance\").html(\"\"+t)}),r.getProEnerProduction(e.target.innerHTML,function(e,t){if(e)console.error(e);else{var n=document.getElementById(\"proAccount\");n.innerHTML=\"\";var a=[];a.push([\"Eth Address\",\"Time\",\"Energy\",\"Block Number\",\"BlockHash\",\"Gas Price [wei]\"]);for(var r=0;r<t[1].length;r++)a.push([t[0],Object(s.timeConverter)(t[1][r].c),t[2][r].c,t[3][r].c,t[4][r],t[5][r].c]);var o=document.getElementById(\"proAccount\");o.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var i=a[0].length,p=o.insertRow(-1),r=0;r<i;r++){var c=document.createElement(\"TH\");c.innerHTML=a[0][r],p.appendChild(c)}for(var r=1;r<a.length;r++){p=o.insertRow(-1);for(var l=0;l<i;l++){var u=p.insertCell(-1);u.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",u.innerHTML=a[r][l]}}}}),i=0;i<e.target.parentNode.children.length;i++)e.target.parentNode.children[i].classList.remove(\"active\");e.target.classList.add(\"active\")}}),window.onload=(r.ProducerRegs({},{fromBlock:0,toBlock:\"latest\"}).get(function(e,t){if(e)console.error(e);else{for(var n=0;n<t.length;n++)g.push([t[n].args.pvAddr,t[n].args.owner,t[n].args.deviceType,t[n].args.peakPowerPos,t[n].args.peakPowerNeg,t[n].args.latitude/1e4+\" \"+t[n].args.longitude/1e4,t[n].args.voltageLevel,t[n].args.location,t[n].args.installDate]);var a=document.createElement(\"Table\");a.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";var r=g[0].length,o=a.insertRow(-1);for(n=0;n<r;n++){var i=document.createElement(\"TH\");i.innerHTML=g[0][n],o.appendChild(i)}for(n=1;n<g.length;n++){o=a.insertRow(-1);for(var s=0;s<r;s++){var p=o.insertCell(-1);p.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",p.innerHTML=g[n][s]}}var c=document.getElementById(\"proRegs\");c.innerHTML=\"\",c.appendChild(a);var l=L.icon({iconUrl:\"../../img/producer.png\",iconSize:[50,50]}),u=[],d=[],v=[];for(n=0;n<t.length;n++)d.push(t[n].args.latitude/1e4),v.push(t[n].args.longitude/1e4),u.push(t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4);var f=L.marker([48.77538056,9.16277778],{icon:m}).addTo(y);for(f.bindPopup(\"OLI Systems GmbH\"),f.on(\"mouseover\",function(e){this.openPopup()}),f.on(\"mouseout\",function(e){this.closePopup()}),n=0;n<d.length;n++){var b=v[n],h=d[n],w=\"Eth address: \"+t[n].args.pvAddr.slice(0,7)+\"...<br>Producer: \"+t[n].args.owner+\"<br>Location: \"+t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4,x=new L.LatLng(h,b);u=new L.Marker(x,{icon:l}),y.addLayer(u),u.bindPopup(w)}}}),r.ProducerRegs({fromBlock:\"latest\",toBlock:\"latest\"}).watch(function(e,t){e&&console.log(e)}),r.getProAccntsList(function(e,t){if(e)console.log(e);else{t.shift();for(var n=0;n<t.length;n++)$(\"#proAccountList\").prepend(\"<li>\"+t[n]+\"</li>\")}}),r.countProducers(function(e,t){e?console.log(e):$(\"#proCounter\").html(\" \"+t)}),r.EnerProductionEvent({fromBlock:\"latest\",toBlock:\"latest\"}).watch(function(e,t){if(e)console.log(e);else{h.push([t.args.oliAddr,Object(s.timeConverter)(t.args.eTime),t.args.enerAmount]);var n=document.createElement(\"Table\");n.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var a=h[0].length,r=n.insertRow(-1),o=0;o<a;o++){var i=document.createElement(\"TH\");i.innerHTML=h[0][o],r.appendChild(i)}for(o=1;o<h.length;o++){r=n.insertRow(-1);for(var p=0;p<a;p++){var u=r.insertCell(-1);u.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",u.innerHTML=h[o][p]}}var d=document.getElementById(\"realTimeProdunction\");d.innerHTML=\"\",d.appendChild(n),v.push(t.args.enerAmount.c[0]),f.push(Object(s.currentTime)());var m=[],y=[],g={};for(var w in f.forEach((e,t)=>g[e]=v[t]),g)g.hasOwnProperty(w);var x={},L={};x.time=w,L.energy=g[w];var T=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(x,L);b.push(T);var P={};b.forEach(function(e){P.hasOwnProperty(e.time)?P[e.time]=P[e.time]+e.energy:P[e.time]=e.energy});var A=[];for(var k in P)A.push({time:k,energy:P[k]});for(var w in A)A.hasOwnProperty(w)&&(y.push(A[w].time),m.push(A[w].energy));function E(e){return new Date(e)}f=y,(v=m).length>10&&(v=v.slice(-10),f=f.slice(-10));var M=[{type:\"date\",mode:\"lines+markers\",name:\"Producer\",x:f.map(E),y:v,line:{color:\"#009933\"}},{type:\"scatter\",mode:\"lines+markers\",name:\"Consumer\",x:l.map(E),y:c,line:{color:\"#cc6600\"}}];Plotly.newPlot(\"realTimeProGraph\",M,{xaxis:{title:\"Time\",tickformat:\"%H:%M:%S\",linecolor:\"lightgray\",linewidth:.5,titlefont:{color:\"black\"}},yaxis:{title:\"Energy [kWh] per Block\",tickformat:\"none\",linecolor:\"lightgray\",linewidth:.5,titlefont:{color:\"black\"}},margin:{l:80,r:30,b:50,t:15,pad:4}})}}),o.ConsumerRegs({},{fromBlock:0,toBlock:\"latest\"}).get(function(e,t){if(e)console.error(e);else{for(var n=0;n<t.length;n++)p.push([t[n].args.pvAddr,t[n].args.owner,t[n].args.deviceType,t[n].args.peakPowerPos,t[n].args.peakPowerNeg,t[n].args.latitude/1e4+\" \"+t[n].args.longitude/1e4,t[n].args.voltageLevel,t[n].args.location,t[n].args.installDate]);var a=document.createElement(\"Table\");a.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";var r=p[0].length,o=a.insertRow(-1);for(n=0;n<r;n++){var i=document.createElement(\"TH\");i.innerHTML=p[0][n],o.appendChild(i)}for(n=1;n<p.length;n++){o=a.insertRow(-1);for(var s=0;s<r;s++){var c=o.insertCell(-1);c.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",c.innerHTML=p[n][s]}}var l=document.getElementById(\"consRegs\");l.innerHTML=\"\",l.appendChild(a);var u=L.icon({iconUrl:\"../../img/consumer.png\",iconSize:[50,50]}),d=[],m=[],g=[];for(n=0;n<t.length;n++)m.push(t[n].args.latitude/1e4),g.push(t[n].args.longitude/1e4),d.push(t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4);for(n=0;n<m.length;n++){var v=g[n],f=m[n],b=\"Eth address: \"+t[n].args.pvAddr.slice(0,7)+\"...<br>Consumer: \"+t[n].args.owner+\"<br>Location: \"+t[n].args.latitude/1e4+\", \"+t[n].args.longitude/1e4,h=new L.LatLng(f,v);d=new L.Marker(h,{icon:u}),y.addLayer(d),d.bindPopup(b)}}}),o.getConsAccntsList(function(e,t){if(e)console.log(e);else{t.shift();for(var n=0;n<t.length;n++)$(\"#consAccountList\").prepend(\"<li>\"+t[n]+\"</li>\")}}),o.countConsumers(function(e,t){e?console.log(e):$(\"#consCounter\").html(\" \"+t)}),void o.EnerConsumptionEvent({fromBlock:\"latest\",toBlock:\"latest\"}).watch(function(e,t){if(e)console.log(e);else{d.push([t.args.oliAddr,Object(s.timeConverter)(t.args.eTime),t.args.enerAmount]);var n=document.createElement(\"Table\");n.style.cssText=\"table-layout: fixed;  width: 100%; font-size: 12px; word-break: break-word:display: block;\";for(var a=d[0].length,r=n.insertRow(-1),o=0;o<a;o++){var i=document.createElement(\"TH\");i.innerHTML=d[0][o],r.appendChild(i)}for(o=1;o<d.length;o++){r=n.insertRow(-1);for(var p=0;p<a;p++){var m=r.insertCell(-1);m.style.cssText=\"white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width:1px;\",m.innerHTML=d[o][p]}}var y=document.getElementById(\"realTimeConsumption\");y.innerHTML=\"\",y.appendChild(n),c.push(t.args.enerAmount.c[0]),l.push(Object(s.currentTime)());var g=[],v=[],f={};for(var b in l.forEach((e,t)=>f[e]=c[t]),f)f.hasOwnProperty(b);var h={},w={};h.time=b,w.energy=f[b];var x=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(h,w);u.push(x);var L={};u.forEach(function(e){L.hasOwnProperty(e.time)?L[e.time]=L[e.time]+e.energy:L[e.time]=e.energy});var T=[];for(var P in L)T.push({time:P,energy:L[P]});for(var b in T)T.hasOwnProperty(b)&&(v.push(T[b].time),g.push(T[b].energy));l=v,(c=g).length>10&&(c=c.slice(-10),l=l.slice(-10))}}))}]);","extractedComments":[]}